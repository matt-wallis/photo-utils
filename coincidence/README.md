# Coincidence

Tool to make a set of images coincide with one another by rotating, scaling and cropping.
To do this, 2 points are identified for each image.
After the transformation, this pair of points will be mapped to the same pixel-coordinates in each image.

## Outline of processing to do

1. rotate
2. scale
3. translate
4. crop

### Input

Set of `N` 3-tuples `(Ii, Xi, Yi), for i=1...N` where
* `Ii` is the name of the i'th image file
* `Xi` is the pixel-co-ordinates of reference point 1 in `Ii`
* `Yi` is the pixel-co-ordinates of reference point 2 in `Ii`


### Rotate

Let `Ri` be the rotation chosen for `Ii`.
Let `grad(x, y)` be the gradient from point x to point x.

Post-conditions:

`grad(Ri(Xi), Ri(Yi)) = grad(Rj(Xj), Rj(Yj))` for all `i, j in [1, N]`.

### Scale

Let `Si` be the scaling transformation chosen for image `Ii`.
Let `dist(x, y)` be the distance in pixels between points x and y.

Post-conditions:

`dist(Si(Xi), Si(Yi)) = dist(Sj(Xj), Sj(Yj))` for all `i, j in [1, N]`.

### translate

Let `Ti` be the translation transformation chosen for image `Ii`.

Post-conditions:

`Ti(Xi) = Tj(Xj)` and `Ti(Yi) = Tj(Yj)` for all `i, j in [1, N]`.


### crop

The crop is used to pick the part of the transformation that comes from the original images.

Let `C` be the crop transformation (the same crop is performed on all images in the set).

Post-conditions:

Let Zi be a point in the final image generated by rotating, then scaling, then translating, then cropping image Ii.

Then `Zi = C(Ti(Si(Ri(x))))` for some `x in Ii`.

## Test data

Generate test images based on a line between to points taken randomly from two disjoint circles.
The ends of the line are the reference points for each image.




